const a3_0x53fd36=a3_0x1331;(function(_0x23d825,_0x2b1023){const _0x5a8ac0=a3_0x1331,_0x33c187=_0x23d825();while(!![]){try{const _0x15c861=-parseInt(_0x5a8ac0(0x157))/0x1*(-parseInt(_0x5a8ac0(0x15f))/0x2)+parseInt(_0x5a8ac0(0x16a))/0x3*(-parseInt(_0x5a8ac0(0x15a))/0x4)+-parseInt(_0x5a8ac0(0x159))/0x5*(parseInt(_0x5a8ac0(0x162))/0x6)+parseInt(_0x5a8ac0(0x16e))/0x7+parseInt(_0x5a8ac0(0x155))/0x8+parseInt(_0x5a8ac0(0x14f))/0x9+-parseInt(_0x5a8ac0(0x140))/0xa;if(_0x15c861===_0x2b1023)break;else _0x33c187['push'](_0x33c187['shift']());}catch(_0x19faf1){_0x33c187['push'](_0x33c187['shift']());}}}(a3_0xd52e,0xb6235));const {expect}=require('chai'),uuid=require(a3_0x53fd36(0x164))['v4'],helpers=require(a3_0x53fd36(0x13f)),db=require(a3_0x53fd36(0x15e)),{createTodo}=require(a3_0x53fd36(0x146)),request=require(a3_0x53fd36(0x14b)),app=require(a3_0x53fd36(0x158));function a3_0x1331(_0x40500c,_0x1d1c62){const _0xd52e00=a3_0xd52e();return a3_0x1331=function(_0x133157,_0x17fc44){_0x133157=_0x133157-0x13e;let _0x29edf8=_0xd52e00[_0x133157];return _0x29edf8;},a3_0x1331(_0x40500c,_0x1d1c62);}function a3_0xd52e(){const _0x160166=['Урок\x204.2','headers','8948664oDhgXe','findOne','1174NIlleX','../../src/server.js','3223595zHBbYl','872036erMZeZ','todos','split','#POST\x20/api/v1/todos','../../src/model/db','1668ZxYPtM','init','model/todo.js','6UyNtdr','slice','uuid','getTodo','application/json','Создает\x20todo\x20с\x20заданными\x20атрибутами','include','getTime','9mmzIFq','equal','stubTestUser','должен\x20создавать\x20todo\x20(completed:\x20true)','706440YciYir','stringify','Content-Type','../helpers','9790690zxBPCn','deep','send','/api/v1/todos/','close','catch','../../src/model/todo','then','set','post','location','supertest','now','должен\x20создавать\x20todo\x20(completed:\x20false)','callback','7427097GRjWcX','Возвращает\x20идентификатор\x20созданного\x20todo','expect','_id'];a3_0xd52e=function(){return _0x160166;};return a3_0xd52e();}describe(a3_0x53fd36(0x153),()=>{const _0x4b4691=a3_0x53fd36;let _0x598cb5;before(async()=>{const _0x27c79d=a3_0x1331;await db[_0x27c79d(0x160)](),_0x598cb5=await db['getCollection'](_0x27c79d(0x15b));}),after(async()=>{const _0x12bb52=a3_0x1331;await db[_0x12bb52(0x144)]();}),afterEach(async()=>{await _0x598cb5['deleteMany']();}),describe(_0x4b4691(0x161),()=>{describe('#createTodo',()=>{const _0x7b56ae=a3_0x1331;it(_0x7b56ae(0x167),async()=>{const _0x4beb13=_0x7b56ae,_0x4a5362={'foo':uuid()};await createTodo(_0x4a5362);const _0xfcbfd8=await _0x598cb5[_0x4beb13(0x156)]();expect(_0xfcbfd8)['to'][_0x4beb13(0x141)][_0x4beb13(0x16b)](_0x4a5362);}),it(_0x7b56ae(0x150),async()=>{const _0xdb5c88=_0x7b56ae,_0x4f2760={'foo':uuid()},_0xed9b19=await createTodo(_0x4f2760),_0x49e942=await _0x598cb5[_0xdb5c88(0x156)]();expect(_0x49e942[_0xdb5c88(0x152)])['to'][_0xdb5c88(0x141)][_0xdb5c88(0x16b)](_0xed9b19);});});}),describe(_0x4b4691(0x15d),()=>{const _0x5bc075=_0x4b4691;it(_0x5bc075(0x16d),async()=>{const _0x4905af=_0x5bc075;helpers[_0x4905af(0x16c)]();const _0x513d09={'title':uuid(),'completed':!![]};return new Promise((_0x367c3c,_0x283074)=>{const _0x29c4a0=_0x4905af;request(app[_0x29c4a0(0x14e)]())[_0x29c4a0(0x149)](_0x29c4a0(0x143))[_0x29c4a0(0x148)](_0x29c4a0(0x13e),_0x29c4a0(0x166))[_0x29c4a0(0x142)](JSON[_0x29c4a0(0x16f)](_0x513d09))[_0x29c4a0(0x151)](0xc9)[_0x29c4a0(0x151)](_0x29c4a0(0x14a),/\/api\/v1\/todos\//)[_0x29c4a0(0x147)](_0x8bb0c=>{const _0x27c7b9=_0x29c4a0,_0x88088f=_0x8bb0c['headers']['location'][_0x27c7b9(0x15c)]('/')[_0x27c7b9(0x163)](-0x1)[0x0];return helpers['getTodo'](_0x88088f);})[_0x29c4a0(0x147)](({_id:_0xcdc9a,completedAt:_0x51b7cb,..._0x3de342})=>{const _0x402ff2=_0x29c4a0;expect(_0x51b7cb[_0x402ff2(0x169)]())['to']['be']['lt'](Date[_0x402ff2(0x14c)]()),expect(_0x3de342)['to']['deep'][_0x402ff2(0x168)](_0x513d09);})[_0x29c4a0(0x147)](_0x367c3c)[_0x29c4a0(0x145)](_0x283074);});}),it(_0x5bc075(0x14d),async()=>{helpers['stubTestUser']();const _0x334e40={'title':uuid()};return new Promise((_0x1694c0,_0x308544)=>{const _0x5f345f=a3_0x1331;request(app[_0x5f345f(0x14e)]())[_0x5f345f(0x149)](_0x5f345f(0x143))[_0x5f345f(0x148)]('Content-Type',_0x5f345f(0x166))[_0x5f345f(0x142)](JSON[_0x5f345f(0x16f)](_0x334e40))[_0x5f345f(0x151)](0xc9)[_0x5f345f(0x151)](_0x5f345f(0x14a),/\/api\/v1\/todos\//)[_0x5f345f(0x147)](_0x2f7b42=>{const _0x2e4d7f=_0x5f345f,_0x16d671=_0x2f7b42[_0x2e4d7f(0x154)][_0x2e4d7f(0x14a)]['split']('/')['slice'](-0x1)[0x0];return helpers[_0x2e4d7f(0x165)](_0x16d671);})[_0x5f345f(0x147)](({_id:_0x2a4b70,..._0x1d79de})=>{const _0x1b89ad=_0x5f345f;expect(_0x1d79de)['to']['deep'][_0x1b89ad(0x168)](_0x334e40);})[_0x5f345f(0x147)](_0x1694c0)['catch'](_0x308544);});});});});