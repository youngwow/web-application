const a2_0x4b8775=a2_0x3bf6;function a2_0x5446(){const _0x399d7f=['email','../helpers','/api/v1/todos','get','40MLPvMU','#getCount','chai','equal','/api/v1/todos?completed=true','catch','Возвращает\x20количество\x20завершенных\x20todo','model/todo.js','uuid','foo','Возвращает\x20todo\x20по\x20идентификатору','#GET\x20/api/v1/todos','#getTodo','toString','close','Поддерживает\x20фильтрацию\x20списка\x20todo\x20по\x20атрибутам\x20записей','должен\x20возвращать\x20ошибку,\x20если\x20идентификатор\x20имеет\x20неверный\x20формат','должен\x20поддерживать\x20фильтрацию\x20по\x20критериям\x20todo\x20(string)','1164086eKKwOA','toArray','/api/v1/todos?foo=','../../src/server.js','createTodo','#getTodos','#GET\x20/api/v1/todo/:id','1YLzdzr','callback','514870cvSEgC','378238jSqtij','all','должен\x20поддерживать\x20фильтрацию\x20по\x20критериям\x20todo\x20(boolean:\x20false)','then','1293125jYWWgZ','822vMMRMa','stubTestUser','/api/v1/todos/','90918ERddEA','/api/v1/todos?completed=false','../../src/model/todo','supertest','_id','getCollection','deep','expect','3364bcOeIe','deleteMany','Урок\x204.1','1079286OhCFUz','должен\x20возвращать\x20todo\x20по\x20идентификатору','body','todos'];a2_0x5446=function(){return _0x399d7f;};return a2_0x5446();}(function(_0x8fb1c3,_0x4aa013){const _0x272fea=a2_0x3bf6,_0x2dbc38=_0x8fb1c3();while(!![]){try{const _0x548f38=-parseInt(_0x272fea(0x11d))/0x1*(-parseInt(_0x272fea(0x120))/0x2)+-parseInt(_0x272fea(0x125))/0x3*(-parseInt(_0x272fea(0x130))/0x4)+-parseInt(_0x272fea(0x124))/0x5+parseInt(_0x272fea(0x133))/0x6+-parseInt(_0x272fea(0x116))/0x7+parseInt(_0x272fea(0x104))/0x8*(-parseInt(_0x272fea(0x128))/0x9)+parseInt(_0x272fea(0x11f))/0xa;if(_0x548f38===_0x4aa013)break;else _0x2dbc38['push'](_0x2dbc38['shift']());}catch(_0x52f845){_0x2dbc38['push'](_0x2dbc38['shift']());}}}(a2_0x5446,0x2ad80));const {expect}=require(a2_0x4b8775(0x106)),helpers=require(a2_0x4b8775(0x138)),db=require('../../src/model/db'),{getTodos,getTodo,getCount}=require(a2_0x4b8775(0x12a)),request=require(a2_0x4b8775(0x12b)),uuid=require(a2_0x4b8775(0x10c))['v4'],app=require(a2_0x4b8775(0x119));function a2_0x3bf6(_0x52feec,_0x51cd5e){const _0x544653=a2_0x5446();return a2_0x3bf6=function(_0x3bf682,_0x288626){_0x3bf682=_0x3bf682-0x104;let _0x33f1ac=_0x544653[_0x3bf682];return _0x33f1ac;},a2_0x3bf6(_0x52feec,_0x51cd5e);}describe(a2_0x4b8775(0x132),()=>{const _0x17ce8c=a2_0x4b8775;let _0x2e011b;before(async()=>{const _0x49d4ea=a2_0x3bf6;await db['init'](),_0x2e011b=await db[_0x49d4ea(0x12d)](_0x49d4ea(0x136));}),after(async()=>{const _0x39f473=a2_0x3bf6;await db[_0x39f473(0x112)]();}),afterEach(async()=>{const _0x342575=a2_0x3bf6;await _0x2e011b[_0x342575(0x131)]();}),describe(_0x17ce8c(0x10b),()=>{const _0x2b8e56=_0x17ce8c;describe(_0x2b8e56(0x11b),()=>{const _0x228116=_0x2b8e56;it('Возвращает\x20список\x20todo',async()=>{const _0x107bf2=a2_0x3bf6,_0x4ae894=[await helpers[_0x107bf2(0x11a)]()],_0x2250bb=await getTodos()[_0x107bf2(0x117)]();expect(_0x2250bb)['to'][_0x107bf2(0x12e)]['equal'](_0x4ae894);}),it(_0x228116(0x113),async()=>{const _0x486831=_0x228116,[_0x2d1bbf]=await Promise['all']([helpers[_0x486831(0x11a)](),helpers[_0x486831(0x11a)]()]),_0x57efd9=await getTodos({'foo':_0x2d1bbf[_0x486831(0x10d)]})[_0x486831(0x117)]();expect(_0x57efd9)['to'][_0x486831(0x12e)][_0x486831(0x107)]([_0x2d1bbf]);});}),describe(_0x2b8e56(0x110),()=>{const _0x5b6351=_0x2b8e56;it(_0x5b6351(0x10e),async()=>{const _0x277171=_0x5b6351,_0x517b27=await helpers['createTodo'](),_0x191c77=await getTodo(_0x517b27[_0x277171(0x12c)]);expect(_0x191c77)['to'][_0x277171(0x12e)][_0x277171(0x107)](_0x517b27);});}),describe(_0x2b8e56(0x105),()=>{const _0x274202=_0x2b8e56,_0x4d861b=0x2,_0x420377=0x3;let _0x4d26f4;beforeEach(async()=>{const _0x324542=a2_0x3bf6;_0x4d26f4=helpers[_0x324542(0x126)]()[_0x324542(0x137)],await Promise[_0x324542(0x121)]([helpers[_0x324542(0x11a)]({'email':_0x4d26f4,'completed':!![]}),helpers[_0x324542(0x11a)]({'email':_0x4d26f4,'completed':!![]}),helpers['createTodo']({'email':_0x4d26f4,'completed':![]})]);}),it(_0x274202(0x10a),async()=>{const {completed:_0x4d44ab}=await getCount({'email':_0x4d26f4});expect(_0x4d44ab)['to']['equal'](_0x4d861b);}),it('Возвращает\x20общее\x20количество\x20todo',async()=>{const _0x162f16=_0x274202,{total:_0x4b6bc0}=await getCount({'email':_0x4d26f4});expect(_0x4b6bc0)['to'][_0x162f16(0x107)](_0x420377);});});}),describe(_0x17ce8c(0x10f),()=>{const _0x26d645=_0x17ce8c;it('должен\x20возвращать\x20список\x20todo',async()=>{const _0x12b536=a2_0x3bf6,_0x1520c3=helpers[_0x12b536(0x126)]()['email'],_0x1b1fd5=await helpers['createTodo']({'foo':uuid(),'email':_0x1520c3});return new Promise((_0x25bc39,_0x399d3f)=>{const _0x3a0e4c=_0x12b536;request(app['callback']())['get'](_0x3a0e4c(0x139))[_0x3a0e4c(0x12f)](0xc8)[_0x3a0e4c(0x123)](_0x2c4e8c=>{const _0x347c61=_0x3a0e4c;expect(_0x2c4e8c[_0x347c61(0x135)])['to'][_0x347c61(0x12e)][_0x347c61(0x107)]([{..._0x1b1fd5,'_id':_0x1b1fd5['_id'][_0x347c61(0x111)]()}]),_0x25bc39();})['catch'](_0x399d3f);});}),it('должен\x20поддерживать\x20фильтрацию\x20по\x20критериям\x20todo\x20(boolean:\x20true)',async()=>{const _0x50a55f=a2_0x3bf6,_0x1da4be=helpers[_0x50a55f(0x126)]()['email'],_0x301f82=await helpers['createTodo']({'foo':uuid(),'completed':!![],'email':_0x1da4be});return new Promise((_0x14b2e3,_0x234468)=>{const _0x52e1d0=_0x50a55f;request(app[_0x52e1d0(0x11e)]())['get'](_0x52e1d0(0x108))['expect'](0xc8)[_0x52e1d0(0x123)](_0x3f2739=>{const _0x4eb78e=_0x52e1d0;expect(_0x3f2739[_0x4eb78e(0x135)])['to'][_0x4eb78e(0x12e)]['equal']([{..._0x301f82,'_id':_0x301f82[_0x4eb78e(0x12c)]['toString']()}]),_0x14b2e3();})[_0x52e1d0(0x109)](_0x234468);});}),it(_0x26d645(0x122),async()=>{const _0xb89801=_0x26d645,_0x2dfd8f=helpers[_0xb89801(0x126)]()[_0xb89801(0x137)];await helpers['createTodo']({'foo':uuid(),'completed':!![],'email':_0x2dfd8f});const _0x317754=await helpers['createTodo']({'foo':uuid(),'completed':![],'email':_0x2dfd8f});return new Promise((_0x70ee9,_0x4d0980)=>{const _0x436820=_0xb89801;request(app[_0x436820(0x11e)]())[_0x436820(0x13a)](_0x436820(0x129))['expect'](0xc8)[_0x436820(0x123)](_0x56d998=>{const _0x542003=_0x436820;expect(_0x56d998[_0x542003(0x135)])['to'][_0x542003(0x12e)]['equal']([{..._0x317754,'_id':_0x317754[_0x542003(0x12c)][_0x542003(0x111)]()}]),_0x70ee9();})[_0x436820(0x109)](_0x4d0980);});}),it(_0x26d645(0x115),async()=>{const _0x4d4560=_0x26d645,_0x4b4c96=helpers['stubTestUser']()['email'],_0x1b604b=await helpers[_0x4d4560(0x11a)]({'foo':uuid(),'completed':!![],'email':_0x4b4c96});return await helpers[_0x4d4560(0x11a)]({'foo':uuid(),'completed':![],'email':_0x4b4c96}),new Promise((_0x7d234f,_0x479868)=>{const _0x1f0fb4=_0x4d4560;request(app[_0x1f0fb4(0x11e)]())[_0x1f0fb4(0x13a)](_0x1f0fb4(0x118)+_0x1b604b[_0x1f0fb4(0x10d)])[_0x1f0fb4(0x12f)](0xc8)[_0x1f0fb4(0x123)](_0x19c429=>{const _0x5c5562=_0x1f0fb4;expect(_0x19c429[_0x5c5562(0x135)])['to'][_0x5c5562(0x12e)][_0x5c5562(0x107)]([{..._0x1b604b,'_id':_0x1b604b[_0x5c5562(0x12c)]['toString']()}]),_0x7d234f();})[_0x1f0fb4(0x109)](_0x479868);});});}),describe(_0x17ce8c(0x11c),()=>{const _0x5ef274=_0x17ce8c;it(_0x5ef274(0x134),async()=>{const _0x499969=_0x5ef274,_0x13a718=helpers[_0x499969(0x126)]()[_0x499969(0x137)],_0x2917ff=await helpers[_0x499969(0x11a)]({'foo':uuid(),'email':_0x13a718});return new Promise((_0x24ee9f,_0x575e0c)=>{const _0x1744ec=_0x499969;request(app['callback']())[_0x1744ec(0x13a)](_0x1744ec(0x127)+_0x2917ff[_0x1744ec(0x12c)])[_0x1744ec(0x12f)](0xc8)['then'](_0x4a5c62=>{const _0x320139=_0x1744ec;expect(_0x4a5c62['body'])['to'][_0x320139(0x12e)]['equal']({..._0x2917ff,'_id':_0x2917ff[_0x320139(0x12c)]['toString']()}),_0x24ee9f();})[_0x1744ec(0x109)](_0x575e0c);});}),it(_0x5ef274(0x114),async()=>{const _0x5e710b=_0x5ef274;return helpers[_0x5e710b(0x126)](),new Promise((_0x4ed826,_0x197df3)=>{const _0x3c0050=_0x5e710b;request(app[_0x3c0050(0x11e)]())[_0x3c0050(0x13a)](_0x3c0050(0x127)+uuid())[_0x3c0050(0x12f)](0x190)['then'](_0x4ed826)[_0x3c0050(0x109)](_0x197df3);});});});});